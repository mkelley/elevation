<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="moment.min.js"></script>
    <script src="moment-timezone-with-data-2010-2020.min.js"></script>
    <link rel="http://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
    <script src="http://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <style>
      body { 
        background: #2F2F2F;
        color: white;
      }
      .latlon {
        width: 7em;
      }
      .tz {
        width: 10em;
      }
      .box {
        border: 1px solid white;
        border-radius: 5px;
        margin: 5px;
        padding: 5px;
        width: 75%;
      }

      table {
        border-collapse: collapse;
      }
      table th {
        font-size: small;
      }
      table, th, td {
        border: 1px solid #aaa;
      }
      tr:hover { background-color: #5f5f5f; }

      .overflowx { overflow-x: auto; }

      #elevation-error {
        height: 3em;
        overflow-y: auto;
      }
      a:link { color: #ee6633; }
      a:visited { color: #cccccc; }
    </style>
  </head>
  <body>
    <h1>Elevation Prototype</h1>

    <div id="elevation-plot" style="margin: 5px; width: 75%; height: 75%;"></div>

    <div class="box">
      <div id="elevation-console">
	<p>Airmass guides at 1.3, 2, and 3; Sky brightness
	guides at astronomical twilight, civil twilight, and daylight.</p>
      </div>
    </div>
        
    <div class="box overflowx">
      <h2>Target table</h2>
      <table id="elevation-target-table" style="table">
	<thead>
	  <tr>
	    <th></th>
	    <th style="width: 12em;">Target</th>
	    <th>RA (hr)</th>
	    <th>Dec (&deg;)</th>
	    <th>m<sub>V</sub></th>
	    <th>&Delta; (au)</th>
	    <th>d&Delta;/dt (km/s)</th>
	    <th>Phase (&deg;)</th>
	    <th>Elong. (&deg;)</th>
	    <th>&mu; (''/hr)</th>
	    <th>&lt;2 am (hr)</th>
	    <th>and dark (hr)</th>
	</thead>
	<tbody>
	</tbody>
	<tfoot>
	  <td colspan="12">
	    <input type="text" id="elevation-add-target-name">
	    <select id="elevation-add-target-type">
	      <option value="a">Asteroid</option>
	      <option value="c" selected>Comet</option>
	      <option value="p">Planet</option>
	    </select>
	    <button id="elevation-add-target-button">Add moving target</button>
	  </td>
	</tfoot>
      </table>
    </div>

    <div class="box">
      <h2>Date and location</h2>
      <p>
	Date: <input type="date" id="elevation-date"> (e.g., YYYY-MM-DD)
      </p>
      <p>
	Location:
        <input class="latlon" type="number" min="-90", max="+90" step="any" id="elevation-latitude" value="34.7444">&deg;N
        <input class="latlon" type="number" min="-360", max="+360" step="any" id="elevation-longitude" value="-111.4223">&deg;E
        <input class="tz" type="text" id="elevation-timezone" value="US/Arizona">
      </p>
      <p>
	<button class="elevation-observatory" data-latitude="19.8208" data-longitude="-155.4681" data-timezone="US/Hawaii">MKO</button>
	<button class="elevation-observatory" data-latitude="34.7444" data-longitude="-111.4223" data-timezone="US/Arizona">DCT</button>
	<button class="elevation-observatory" data-latitude="30.6797" data-longitude="-104.0248" data-timezone="US/Central">McDonald</button>
	<button class="elevation-observatory" data-latitude="39.0020" data-longitude="-76.9561" data-timezone="US/Eastern">UMD</button>
	<button class="elevation-observatory" data-latitude="-30.1716" data-longitude="-70.8009" data-timezone="America/Santiago">CTIO</button>
	<button class="elevation-observatory" data-latitude="-24.6275" data-longitude="-70.4044" data-timezone="America/Santiago">VLT</button>
	<button class="elevation-observatory" data-latitude="28.7569" data-longitude="-17.8925" data-timezone="Atlantic/Canary">La Palma</button><br>
      </p>

      <p>
	<button id="elevation-update-location-button">Update location</button>
      </p>
    </div>
    
    <div class="box">
      <h2>Target input</h2>
      <ul>
	<li>Columns: Target, Type, RA (decimal hr), Dec (decimal deg), Notes.</li>
	<li>Type: c, a, p, f for comet, asteroid, planet, or fixed.</li>
	<li>RA and Dec is ignored for Solar System targets.</li>
      </ul>
      <p>Comet names are from the IMCCE <a href="ftp://ftp.imcce.fr/pub/databases/cometpro/COMNAME.csv">comet database</a>.</p>

      <textarea rows="20" cols="72" id="elevation-target-list">
# Target, Type, RA (decimal hr), Dec (decimal deg), Notes
2P,c,,,V=16 color
6P,c,,,V=14 color
10P,c,,,V=19 r
22P,c,,,V=17 color
41P,c,,,V=18 r
53P,c,,,V=16 color
56P,c,,,V=16 color
87P,c,,,V=23 r
88P,c,,,V=20 r
C/2011 KP36,c,,,V=14 color
C/2012 K1,c,,,V=19 r
C/2013 US10,c,,,V=16 color
C/2015 YY6,c,,,V=16 color (YY6 == VL62)
C/2015 V2,c,,,V=13 OH+color

# tough twilight comets
C/2013 A1,c,,,V=22 r
C/2014 Q2,c,,,V=20 r
C/2016 M1,c,,,V=18 r
</textarea><br>
      <button id="elevation-reset-button">Reset</button>
      <button id="elevation-load-button">Plot targets</button><br>
    </div>

    <div class="box">
      <h2>Pre-defined target lists</h2>
      
      <p>
	Cometary Orbital Trends
	<button class="elevation-target-set-button"
		data-targets="2P,c
6P,c
9P,c
10P,c
15P,c
19P,c
22P,c
46P,c
67P,c
71P,c
73P-C,c
73P-B,c
81P,c
88P,c
103P,c">
	  Spitzer short-period
	</button>,
	<button class="elevation-target-set-button"
		data-targets="C/2012 K1,c
C/2013 A1,c
C/2013 US10,c
C/2013 X1,c
C/2014 Q2,c
#C/2014 Q3,c
C/2015 V2,c
C/2015 YY6,c,,,(YY6 == VL62)
C/2016 M1,c">
	  Spitzer Oort-cloud
	</button>
      </p>

      <p>
	<button class="elevation-target-set-button"
		data-targets="41P,c
45P,c
46P,c">
	  Close approachers
	</button>
      </p>

      <p>
	<button class="elevation-target-set-button"
		data-targets="2P,c
4P,c
15P,c
21P,c
37P,c
41P,c
45P,c
46P,c
62P,c
64P,c
67P,c
68P,c
71P,c
73P,c
87P,c
88P,c
115P,c
141P,c
213P,c
260P,c">
	  Fegea SSO16
	</button>
      </p>

      <p>
	<button class="elevation-target-set-button"
		data-targets="29P,c
41P,c
45P,c
53P,c
65P,c
71P,c
81P,c
C/2011 KP36,c
C/2013 X1,c
C/2014 S2,c
C/2014 W2,c
C/2015 F4,c
C/2015 O1,c
C/2015 V2,c
C/2015 YY6,c
C/2016 M1,c
#9P,c
#17P,c
#67P,c
#100P,c
#117P,c
#230P,c
#252P,c
#C/2010 S1,c
#C/2011 J2,c
#C/2012 K1,c
#C/2013 A1,c
#C/2013 US10,c
#C/2014 N3,c
#C/2014 Q2,c">
	  Protopapa ice
	</button>
      </p>

      <p>
	<button class="elevation-target-set-button"
		data-targets="6P,c
10P,c
15P,c
19P,c
22P,c
41P,c
45P,c
67P,c
71P,c
88P,c
C/2013 A1,c
C/2013 US10,c
C/2013 X1,c
C/2014 Q2,c
C/2015 V2,c
C/2015 YY6,c,,,(YY6 == VL62)
C/2016 M1,c">
	  Lowell 2017Q1
	</button>
      </p>

      <p>
	HB filter standards:
	<button class="elevation-target-set-button"
		data-targets="3379,f, 0.61,15.23
6815,f, 1.15, 9.73
14951,f, 2.41,10.61
19712,f, 3.17,-1.69
26912,f, 4.26, 8.89
31331,f, 4.91, 0.47
37112,f, 5.60,-0.78">
	  0 to 6 hr
	</button>
	<button class="elevation-target-set-button"
		data-targets="52266,f, 7.01,-5.83
68099,f, 8.19, 9.82
72526,f, 8.56,-0.31
74280,f, 8.72, 3.40
89688,f,10.35, 2.29
97991,f,11.27,-3.47">
	  6 to 12 hr
	</button>
	<button class="elevation-target-set-button"
		data-targets="120086,f,13.79,-2.44
129956,f,14.76, 0.72
149363,f,16.57,-6.14
154445,f,17.09,-0.89
164852,f,18.04,20.83">
	  12 to 18 hr
	</button>
	<button class="elevation-target-set-button"
		data-targets="170783,f,18.52, 4.63
187350,f,19.83,-1.10
191263,f,20.14,10.73
205130,f,21.56,-9.66
209008,f,22.00, 6.72
219188,f,23.23, 5.00">
	  18 to 24 hr
	</button>
      </p>

      
    </div>

  </body>
  <script type="text/javascript" src="geometry.js"></script>
  <script type="text/javascript" src="elevation.js"></script>
  <script type="text/javascript" src="data.js"></script>
</html>
